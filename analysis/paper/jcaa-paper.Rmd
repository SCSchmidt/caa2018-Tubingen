---
title: "Tool-driven Revolutions in Archaeological Science"
author:
  - author 1
  - author 2
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
    bookdown::word_document2:
      fig_caption: yes
      reference_docx: "../templates/template.docx" # Insert path for the DOCX file
bibliography: references.bib
csl: journal-of-computer-applications-in-archaeology.csl
abstract: "There is an argument in philosophy of science that revolutions in science are either ideas-driven or tools-driven. We explore this debate in light of recent efforts by many scientific disciplines to embrace methods to improve the reproducibility of their research. One of the most profound changes driven by this concern for reproducibility and transparency is from analysing data using tools dependent on point-and-clicking with a mouse in closed source software, to a new set of tools based on writing scripts in programming languages and making them free and open source. We present bibliometric evidence for this change in the sciences generally and in archaeology in particular to test if the adoption of these new tools may be considered a revolution or some other process. We identify a citation effect for papers that use the open source programming language R. We discuss how computational approaches to improving reproducibility and transparency in archaeology are mediated and transformed by the use of R code."
---



```{r, setup, echo = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE,
  cache = FALSE,
  comment = "#>",
  fig.path = "../figures/"
)

# library(caa2018) # Or use devtools::load_all('.', quiet = T) if your code is in script files, rather than as functions in the `/R` diretory

library(ggrepel)
library(tidyverse)
library(glue)
library(tidytext)
library(scales)
library(ggpmisc)
library(Hmisc)
```

# Introduction

In this paper we investigate recent developments which are facilitating computational archaeology's return to fundamental principles of the scientific method and whether this might be the beginning of a broader change. Revolutions or paradigm-shifts in archaeology have been proposed to occur following major theoretical statements [@Clark_1993; @Härke_2002], but there is an argument among philosophers of science whether revolutions in science are ideas-driven or tools-driven [@Galison_1997; @Dyson_2000]. In this light we explore how the disciplines of ecology and archaeology have started to embrace tools that improve the reproducibility of research. We focus on one set of tools for this change which is based on writing scripts in free and open source programming languages, exemplified by R, and the sharing of these scripts. We focus on R because our prior observations indicate it is by far the most common scripting language used by ecologists and archaeologists. Bibliometric evidence shows a strong increase in the use of R among ecologists and the beginning of a similar development in archaeology. We evaluate how approaches to improving reproducibility and transparency in archaeology are mediated and transformed by digital approaches and propose these might be a tool-driven change in archaeology. Acknowledging that this is not a simple process, we offer an R-based tool to ease the task of creating a compendium which enables other researchers to reproduce the published results.

# Revolutions in Science: Ideas-driven or Tool-driven?

Philosophers of science disagree whether revolutions in science are ideas-driven or tool-driven. One of the most widely-known models of ideas-driven change in science is Kuhn's [-@Kuhn_1962] effort to describe the history of science by proposing paradigm shifts resulting from revolutionary change in communities of researchers. In brief, this model proposes that the history of science consists of long periods of tradition-bound 'normal science' punctuated by short episodes of revolution. Normal science was described by Kuhn as stagnant, routine day-to-day research focused on 'puzzle solving'. What counts as suitable puzzles, and acceptable solutions to these puzzles, is governed by the norms and procedures of the prevailing paradigm. Revolutions in science occur as punctuations in the equilibria of normal science, when anomalous observations culminate in changes replacing one paradigm with another in a conversion or speciation process where the community adopts a new way of doing science. There has been much debate about how to draw a distinction between so-called normal and revolutionary science. [@watkins1970against; @toulmin1970does; @Casadevalle00158_16]. A notable criticism is that Kuhn's normal science is unscientific, a situation where critical science had contracted into defensive metaphysics resulting from the domination of a ruling dogma [@popper1970]. This is at odds with a view of science as a continuous state of revolution, with researchers simultaneously employing many styles of thinking and doing science, and continuously confronting theory with evidence and modifying their ideas based on the outcome. In this view, based on the post-World War II era of science, radical discontinuities are rare, and major developments instead emerge from the division and recombination of already mature fields [@andersen2013second]. Given the rarity of radical discontinuities, some biologists have argued that change in biology is better characterised by new ideas (e.g. Mendelian heredity, Darwinian evolution, and molecular genetics) replacing not a former paradigm but a conceptual vacuum [@wilkins1996are].

In archaeology we have seen claims for paradigm shifts in several areas. The most wide-ranging application is Clark's [-@Clark_1993] comparison of North American archaeology to European archaeology during the 1970s-90s. Clark, similar to Binford and Sabloff [-@binford1982paradigms], identified the North American archaeological paradigm as rooted in anthropology, founded on post-positivist biases, and distinctive with its critical-realist ontology, a modified-objectivist epistemology, and an experimental-manipulative method. In contrast, the European archaeological paradigm is described a kind of history, mostly in a strict empiricist tradition, and typified by a realist ontology, an inductivist epistemology, and by an observational method. Clark's analysis describes a multi-paradigm situation where many research communities (i.e. North American and European) simultaneously operate in different paradigms (which Kuhn noted as a sign of a developing or immature discipline). Clark's account is not a complete Kuhnian analysis because it lacks a revolutionary change event where one paradigm is replaced by another, although he hints that processual archaeology may be considered a radical discontinuity relative to the culture-historical approaches that preceded it [@Clark_1993, pp. 206].

A more thorough treatment of the claim that processual archaeology was a paradigm shift is provided by @Meltzer_1979. Meltzer reviews literature arguing for a revolutionary change in archaeology during the 1960s and 1970s, and considers these claims in light of classic Kuhnian revolutionary events such as the replacement of the Ptolemaic system by the Copernican system, and Newtonian dynamics by the new Einsteinian dynamics. He finds that the changes occuring in Anglophone archaeology after the 1960s were incremental, mostly of method, rather than a widespread replacement of one ontological structure by another one, incommensurable or incompatible with the former. Trigger [-@Trigger_2006, pp. 538] came to a similar conclusion at the end of his broad survey of the history of archaeology, that changes throughout archaeology have been mostly additive with only partial replacement.

We also see mentions of paradigm shifts in archaeology in reference to processual to post-processual archaeology [@Härke_2002; @Koerner_2018], as well as more localised and specific shifts in archaeological practice and thinking. For example, @Snodgrass_2002 claims that among Classical Archaeologists, an increase in research on previously neglected periods of antiquity, such as the Greek Early Iron Age, constitutes a paradigm shift. @McAnany_Rowe_2015 propose that the appearance of community-based participatory models of research among some communities of archaeologists is a paradigm shift, though they concede that it is more transformational rather than revolutionary. @harris2012interfacing has similarly argued that community crowdsourced geographic knowledge (or volunteered geographic information) could be paradigm shift for archaeological communities. Archaeologists using LIDAR (light detection and ranging) for remote geospatial imaging of cultural landscapes have claimed the application of this technology to archaeology is a paradigm shift [@chase2012geospatial; @howey2016detecting]. @Fuller_2010 has used the term to describe a shift in thinking about the emergence of agriculture as a parallel, simultaneous event at the start of the Holocene (the Neolithic Revolution), to new concept of the emergence as a protracted and entangled process, happening 20 or so times independently, following different pathways. Most of these paradigms differ in meaning from Kuhn's classical formulation, and this highlights an important complication with using Kuhn's concept of a paradigm-shift, both as a tool to understand the history of science and as a guide to changing it, which is the multiple definitions of a paradigm in Kuhn's writings.

Masterman [-@masterman1970does] has documented 21 different uses of 'paradigm' by Kuhn, which she organises into three groups. First is the metaphysical notion of a set of beliefs, and this is the sense dominating most of the commentary on Kuhn's model. Second is the sociological sense of scientific habits, the universally recognized scientific achievements that are the foundations of day-to-day normal science. These include specific attention-grabbing successes that give a touchstone for the coordination of future research. Third is the concrete sense of an actual textbook, instrumentation or toolkit in wide use. This recognition of the multivalent nature of paradigms is important because it broadens the locus for scientific revolution to include sociological practices of science, such as might be produced by changes in norms of publication and peer review, and to include the physical infrastructure -- tools -- of doing science, such as the technology for collecting and analysing data, and for communication and collaboration among researchers.

We see a compelling exploration of this third concrete sense of a paradigm in the work of @Galison_1997, who has offered a tool-driven view of change in research communities. Galison analysed of the role of tools in twentieth century particle physics, starting with hand-crafted cloud chambers and bubble chambers and ending with digital counters, particle accelerators, and computers. He identifies a profound change in physics when analog devices producing pictures were superseded by digital devices producing numerical data. At the heart of this change is a shift from an intuitive approach, stimulated by visual and pictorial model-building to an approach based on logic, calculation, and demonstration. The changes are not purely at the points of data collection and analysis, but extend to the social and economic organisation of science, with new categories of physicists emerging, people who are not entirely experimenters and not entirely theorists. Dyson [-@Dyson_2000; -@dyson2012science] has further explored this tool-driven approach, tracing the origin of the Galilean revolution to appearance of the telescope in astronomy, and the origin of the Crick-Watson revolution to the use of X-ray diffraction.

We propose that Galison's emphasis on tool-driven change, as a complement to Kuhnian concept-driven change, has much potential for archaeology. The centrality of material culture in Galison's view raises the question about whether there is scope for archaeologists to make productive contributions to understanding change in the history science through an archaeological analysis of scientific instrumentation [cf. @Schiffer_2013]. Furthermore, Galison's analysis of the image/logic contrast in the history of physics invites a similar analysis of the history of archaeology. Can we identify archaeological traditions focused on data collection and analysis using images and image-making devices [cf. @molyneaux2013cultural], in contrast to digital devices? One candidate for this might be the shift from building relative chronologies based on seriation using typologies of visually distinctive artefacts to absolute chronologies based on radiometric dating using computer-controlled instruments. Three revolutions in archaeology have been attributed to radiocarbon dating and associated technologies [@bayliss2009rolling]. @chase2012geospatial have claimed the introduction of radiocarbon dating was a paradigm shift in archaeology, but we are not aware of a Galisonian analysis of this change. A third issue is how we can use a tool-driven approach not just as a framework for understanding change in science, but as a method to predict or generate change in archaeology?

# Bibliometric analysis of a tool-driven change

The question of predicting or generating change in scientific practice via adoption of new tools is intriguing, and in this section we explore how a change observed in ecology might be relevant for understanding or even directing the future of archaeology. Biological disciplines have a long tradition of influencing archaeological thought, starting with Oscar Montelius, whose typological method was inspired by Darwin's theory of evolution [@Montelius_1899, 237]. This tradition continues, for example, many spatial statistics in current use in archaeology are derived from ecology [@keron_use_2015, 7].

## Looking back on a tool-driven change in Ecology

@Touchon_McCoy_2016 investigated evaluated changes in statistical methods used by ecologists as a potential area of tool-driven change. They searched nearly 20,000 published articles in ecology published between 1990 and 2013. They found that there has been a rise in complex and computationally intensive statistical techniques such as mixed effects models and Bayesian statistics and a decline in reliance on approaches such as ANOVA or t-tests. Crucially, they found that ecologists have shifted away from software tools such as SAS and SPSS to the open source program R.

@Touchon_McCoy_2016 identify four factors relating to technological change that might explain the changes they observed in the use of statistics in ecology. First, they note that automated data loggers, GPS trackers, remote sensing, and crowd sourcing have greatly increased rate at which ecologists collect data. Second, increases in desktop and cluster computing power has made complex analytical processes faster and more convenient to compute. Third, the development of free, open source and easily extensible software for data analysis and visualisation, such as R, allows new methods to spread quickly via online fora and social media. Fourth, the publication of several books and papers that have strongly influenced the way many ecologists think about data analysis, such as @burnham2003model's book on model selection and inference.

We focus here on the third factor, free and open source software, because it is the most generic factor and so the most relevant beyond ecology. Archaeology and ecology each have a high diversity of data collection methods, and types of data analyses they conduct, with only a small overlap. What they share in common is working with the field-collected data on a computer to prepare it for publication. R is a widely used free and open source data analysis tool in man research communities [@Tippmann_2015; @Baker_2017; @Thieme_2018] and therefore a good proxy for the adoption of open source scientific programming languages in a discipline. To investigate changes in the use of R in archaeology and ecology, we obtained reference lists from a sample of scholarly articles in the Web of Science database and examined patterns in the citation of the R program over time.

```{r ecology-citing-r, echo=FALSE}

# We did a 'Cited Reference Search' in WoS for title "R: A Language and Environment for Statistical Computing" and author = "R Core Team", which is the output from  `citation()`. This function first appeared in 2004 https://github.com/wch/r-source/commits/9a5c086855d2e8fb07f670e3315871b2de31a4fd/src/library/base/inst/CITATION
#
# Note that before 2012 the authors were "R Development Core Team", and then it was simplified to "R Core Team" https://github.com/wch/r-source/commit/9a5c086855d2e8fb07f670e3315871b2de31a4fd#diff-80bb8a8b133a6204e9642d76791927e2
#
# This is our exact search string for WoS:

# Results: 38,040
# (from Web of Science Core Collection)
# You searched for: CITED AUTHOR: ("R DEV COR TEAM" OR "R # CORE" OR "R CORE TEAM" OR "R DEVELOPMENT CORE TEAM")
# Refined by: DOCUMENT TYPES: ( ARTICLE ) AND LANGUAGES: ( ENGLISH ) AND RESEARCH AREAS: ( ENVIRONMENTAL SCIENCES ECOLOGY )
# Timespan: 1900-2018. Indexes: SCI-EXPANDED, SSCI, A&HCI, # ESCI.

# field tags
# TS= Topic
# TI= Title
# AU= Author [Index]
# AI= Author Identifiers
# GP= Group Author [Index]
# ED= Editor
# SO= Publication Name [Index]
# DO= DOI
# PY= Year Published
# AD= Address
# OG= Organization-Enhanced [Index]
# OO= Organization
# SG= Suborganization
# SA= Street Address
# CI= City
# PS= Province/State
# CU= Country/Region
# ZP= Zip/Postal Code
# FO= Funding Agency
# FG= Grant Number
# FT= Funding Text
# SU= Research Area
# WC= Web of Science Category
# IS= ISSN/ISBN
# UT= Accession Number
# PMID= PubMed ID

cran_cites_files <-
    list.files(here::here("/analysis/data/raw_data/cited_cran/"),
               full.names = TRUE)


cran_cites_all_areas_all_years <-
  map(cran_cites_files,
      ~readr::read_tsv(.x,
                       quote = "",
                       col_types = cols(.default = col_character()))) %>%
  bind_rows() %>%
  mutate(PY = as.numeric(PY)) %>%
  filter(PY <= 2017)

# limit to top journals
top_journals_for_cran_cites <-
  cran_cites_all_areas_all_years %>%
  group_by(SO) %>%
  tally(sort = TRUE)

how_many_articles_in_top_journals_for_cran_cites <-
  sum(top_journals_for_cran_cites$n)

top_journals_for_cran_cites_articles_per_year <-
  read_csv(str_glue('{here::here()}/analysis/data/raw_data/top_journals_for_cran_cites_articles_per_year.csv')) %>%
  select(-X1) %>%
  gather(variable, value, -year) %>%
  separate(variable,
           into = str_glue('X{1:4}'),
           by = "_") %>%
  select(year, X4, value)

# tally by year
cran_cites_all_areas_top_journals_by_year <-
  cran_cites_all_areas_all_years %>%
  filter(SO %in% top_journals_for_cran_cites$SO[1:10]) %>%
  group_by(SO, PY) %>%
  tally(sort = TRUE) %>%
  mutate(journalname = str_remove_all(SO, " |-"),
         PY = as.integer(PY)) %>%
  left_join(top_journals_for_cran_cites_articles_per_year,
            by = c('journalname' = 'X4',
                   'PY' = "year")) %>%
  mutate(prop = n / value ) %>%
  filter(SO != 'JOURNAL OF STATISTICAL SOFTWARE') %>%
  ungroup()

articles_shown_in_plot <-
  cran_cites_all_areas_top_journals_by_year %>%
  filter(!is.na(prop)) %>%
  summarise(sum_n = sum(n)) %>%
  pull(sum_n)

# nice labels with n for plot
cran_cites_all_areas_top_journals_by_year <-
cran_cites_all_areas_top_journals_by_year %>%
  group_by(SO) %>%
  summarise(total_n_articles = sum(n)) %>%
  mutate(SO_n = as.character(glue('{SO} (n = {total_n_articles})'))) %>%
  right_join(cran_cites_all_areas_top_journals_by_year,
             by = "SO")
```

# Methods

We used the 'Cited Reference Search' function provided by the Web of Science online scientific citation indexing service to find journal articles citing R. Although R has been available since the late 1990s [@Thieme_2018], a recommended format for citing the software did not appear until 2004, with the author given as "R Development Core Team". This recommended format for citing the software changed slightly in 2012 when the author was updated to "R Core Team". We searched the Web of Science using '"R DEV COR TEAM" OR "R CORE" OR "R CORE TEAM" OR "R DEVELOPMENT CORE TEAM"' in the CITED AUTHOR field of the Web of Science database. We sorted the results by frequency of citations, and selected the first 1000 items (the maximum allowed by the Web of Science service). These 1000 items represent variations on the recommended format for citing R. We found citations of R in the reference lists of `r prettyNum(how_many_articles_in_top_journals_for_cran_cites, ",")` English-languge articles indexed by the Web of Science in the research area of 'Environmental Sciences Ecology'. We then downloaded the bibliographic data and reference lists for each of these articles.

## Reproducibility and open source materials

To enable re-use of our materials and improve reproducibility and transparency according to the principles outlined in @Marwick2017, we include the entire R code used for all the analysis and visualizations contained in this paper at http://doi.org/10.17605/OSF.IO/RHVN5. Also in this version-controlled research compendium are the raw data for all the results reported here. All of the figures, tables and statistical test results presented here can be independently reproduced with the code and data in this repository. In our online materials our code is released under the MIT licence, our data as CC-0, and our figures as CC-BY, to enable maximum re-use [for more details, see @Marwick2017].

# Results

Figure \@ref(fig:ecology-articles-citing-r-plot) shows the percentage of articles citing R in each of several of the top ecology journals (as defined by how often their articles are cited). We restrict the start of the observation period to 2007 for convenience so we have a ten year study period. The plot shows that the percentage of articles citing R has increased from less than ten percent in all journals in the late 2000s, to more than 30% in _Ecosphere_, _Ecology and Evolution_, and _Molecular Ecology_ after 2012. We might not call this a Kuhnian paradigm shift, but it does show a substantial change in the tools of the discipline, supporting claims for a Galisonian tool-driven change in ecology similar to the changes described by @Touchon_McCoy_2016.   

```{r ecology-articles-citing-r-plot, fig.cap=str_glue('Percentage of articles per year citing R in top Ecology journals ({prettyNum(articles_shown_in_plot,",")} articles out of {prettyNum(how_many_articles_in_top_journals_for_cran_cites,",")}). Data from Web of Science for 2007-2017')}
min_y <- 2007
max_y <- 2025
all_sciences_citing_R_over_time <-
ggplot(cran_cites_all_areas_top_journals_by_year,
       aes(PY,
           prop,
           colour = SO)) +
  geom_line(size = 2) +
  geom_text_repel(
    data = subset(cran_cites_all_areas_top_journals_by_year,
                  PY == max(PY)),
    aes(label = str_wrap(SO_n, 40)),
    size = 4,
    nudge_x = 0,
    hjust = 0,
    segment.color = NA,
    direction = "y"
  ) +
   scale_x_continuous(breaks = min_y:max_y,
                     labels = c(min_y:2017, rep("", length(2018:max_y))),
                     limits = c(min_y, max_y)) +
  scale_y_continuous(labels = scales::percent) +
  xlab("Publication year") +
  ylab("Percentage of articles in that journal in that year") +
  theme_minimal() +
  theme(legend.position="none",
        axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))

ggsave(plot = all_sciences_citing_R_over_time,
       filename = "all_sciences_citing_R_over_time.png",
       path = str_glue('{here::here()}/analysis/figures'),
       height = 5,
       width = 9)

knitr::include_graphics(str_glue('{here::here()}/analysis/figures/all_sciences_citing_R_over_time.png'))
```

## Looking forward to a tool-driven change in Archaeology

```{r top-archaeology-journals-by-citations-of-r}

# Data are from an 'advanced search' of apps.webofknowledge.com using WC=Archaeology on apps.webofknowledge.com.

# Results: 44,047
# (from Web of Science Core Collection)
# You searched for: (WC=Archaeology) AND LANGUAGE: (English) AND DOCUMENT TYPES: # (Article)
# Timespan: 1900-2018. Indexes: SCI-EXPANDED, SSCI, A&HCI, ESCI

#- get journals with the most number of articles

archy_files <-
    list.files(here::here("/analysis/data/raw_data/wos_archaeology/"),
               full.names = TRUE)

archy_all_years <-
  map(archy_files,
      ~readr::read_tsv(.x,
                       quote = "",
                       col_types = cols(.default = col_character()))) %>%
  bind_rows() %>%
  mutate(PY = as.numeric(PY)) %>%
  filter(PY <= 2017)

# limit to top journals
top_journals_for_archy<-
  archy_all_years %>%
  group_by(SO) %>%
  tally(sort = TRUE)

# n articles in top journals per year
top_journals_for_archy_per_year <-
  archy_all_years %>%
  group_by(SO, PY) %>%
  tally() %>%
  arrange(PY)

how_many_articles_in_top_archy_journals <-
  sum(top_journals_for_archy$n)

#-- get articles citing R that are archaeology

# Results: 137
# (from Web of Science Core Collection)
# You searched for: CITED AUTHOR: ("R DEV COR TEAM" OR "R CORE" OR "R CORE TEAM" OR "R DEVELOPMENT CORE TEAM")
# Refined by: WEB OF SCIENCE CATEGORIES: ( ANTHROPOLOGY ) AND WEB OF SCIENCE CATEGORIES: ( ARCHAEOLOGY )
# Timespan: All years. Indexes: SCI-EXPANDED, SSCI, A&HCI, ESCI

archy_cran_files <-
      list.files(here::here("/analysis/data/raw_data/cited_cran_archaeology/"),
               full.names = TRUE)

archy_cran_all_years <-
  map(archy_cran_files,
      ~readr::read_tsv(.x,
                       quote = "",
                       col_types = cols(.default = col_character()))) %>%
  bind_rows() %>%
  mutate(PY = as.numeric(PY)) %>%
  filter(PY <= 2017)

# tally by year
archy_cran_cites_all_areas_top_journals_by_year <-
  archy_cran_all_years %>%
  filter(SO %in% top_journals_for_archy$SO) %>%
  group_by(SO, PY) %>%
  tally(sort = TRUE)  %>%
  left_join(top_journals_for_archy_per_year,
            by = c('SO', 'PY')) %>%
   mutate(prop = n.x / n.y) %>%
  ungroup()

total_number_archaeology_articles_citing_r <- sum(archy_cran_cites_all_areas_top_journals_by_year$n.x)

# check for slight differences in journal names
# sort(unique(archy_cran_cites_all_areas_top_journals_by_year$SO))

# nice labels with n for plot
archy_cran_cites_all_areas_top_journals_by_year <-
archy_cran_cites_all_areas_top_journals_by_year %>%
  group_by(SO) %>%
  summarise(total_n_articles = sum(n.x)) %>%
  mutate(SO_n = as.character(glue('{SO} (n = {total_n_articles})'))) %>%
  right_join(archy_cran_cites_all_areas_top_journals_by_year,
             by = "SO")


min_y <- 2007
max_y <- 2040

all_archaeology_citing_R_over_time <-
ggplot(archy_cran_cites_all_areas_top_journals_by_year,
       aes(PY,
           prop,
           colour = SO)) +
  geom_line(size = 2) +
  geom_point() +
  geom_text_repel(
    data = archy_cran_cites_all_areas_top_journals_by_year %>%
      group_by(SO) %>%
      slice(which.max(PY)) ,
    aes(label = SO_n),
    direction = "y",
    size = 5,
    nudge_x = 1,
    hjust = 0) +
  theme_minimal() +
  theme(legend.position="none",
        axis.text.x = element_text(angle = 90,
                                   hjust = 1,
                                   vjust = 0.5)) +
  scale_x_continuous(breaks = min_y:max_y,
                     labels = c(min_y:2017,
                                rep("",
                                    length(2018:max_y))),
                     limits = c(min_y, max_y)) +
  scale_y_continuous(labels = scales::percent,
                     limits = c(0, 0.2)) +
  xlab("Publication year") +
  ylab("Percentage of articles in that journal")

ggsave(plot = all_archaeology_citing_R_over_time,
       filename = "all_archaeology_citing_R_over_time.png",
       path = str_glue('{here::here()}/analysis/figures'),
       height = 7,
       width = 11)
```

```{r j-arch-sci-articles-citing-R}
# look at the trend in JAS, where there are the most articles

how_many_articles_in_jas <-  
  archy_cran_cites_all_areas_top_journals_by_year$total_n_articles[1]


jas_cites_r <-
archy_cran_cites_all_areas_top_journals_by_year %>%
  filter(SO == "JOURNAL OF ARCHAEOLOGICAL SCIENCE") %>%
  ggplot(aes(PY,
           prop)) +
  geom_point(size = 4) +
  geom_smooth(method = "lm",
              se = FALSE) +
  stat_poly_eq(aes(label =  paste(..eq.label..,
                                  ..adj.rr.label..,
                                  sep = "~~~~")),
               formula = y~x,
               parse = TRUE,
               size = 3,
               label.y.npc = 0.7) +
  stat_fit_glance(label.y.npc = 0.7,
                  size = 3,
                  method = "lm",
                  method.args = list(formula = y ~ x),
                  geom = "text",
                  aes(label = paste("p-value: ",
                                    signif(..p.value..,
                                           digits = 4)))) +
  xlab("year") +
  ylab("Proportion of articles citing R") +
  ggtitle(expression(paste("Articles citing R in ",
                           italic("Journal of Archaeological Science")))) +
  theme_bw(base_size = 6)
```

To compare with ecology we conducted a similar bibliometric analysis for archaeology journals indexed by the Web of Science service. We used the 'Cited Reference Search' to find articles citing R in the same way as above, and then refined the results to keep only those articles published during 2007-2017 that are included in the Web of Science category 'Archaeology'. This resulted in `r prettyNum(how_many_articles_in_top_archy_journals, ",")` articles, of which `r total_number_archaeology_articles_citing_r` cite R.  Figure \@ref(fig:archaeology-journals-with-subplot) shows the temporal trend of citations of R in archaeological articles. There are three interesting details revealed by this figure.

```{r archaeology-journals-with-subplot, fig.cap=str_glue('Percentage of Archaeology articles per year citing R ({total_number_archaeology_articles_citing_r} out of {prettyNum(how_many_articles_in_top_archy_journals, ",")} articles in sample. Data from Web of Science for 2007-2017')}


# combine main plot and subplot
all_archaeology_citing_R_over_time_and_subplot <-
all_archaeology_citing_R_over_time  +
  annotation_custom(grob = ggplotGrob(jas_cites_r),
                          xmin = 2030, xmax = 2040,
                          ymin = 0.10, ymax = 0.17)

ggsave(plot = all_archaeology_citing_R_over_time_and_subplot,
       filename = "all_archaeology_citing_R_over_time_and_subplot.png",
       path = str_glue('{here::here()}/analysis/figures'),
       height = 9,
       width = 12)

knitr::include_graphics(str_glue('{here::here()}/analysis/figures/all_archaeology_citing_R_over_time_and_subplot.png'))
```

The first detail we see here is that overall, the proportions and the absolute number of articles citing R in archaeology are much smaller than what we see in the ecology journals in Figure \@ref(fig:ecology-articles-citing-r-plot). Only the _Journal of Archaeological Science_ has more than 50 articles in our sample. We conclude from this observation that archaeologists have yet to adopt programming for data analysis and visualisation in the same way ecologists have.

The second detail is that most archaeology journals do not show any strong increase in the percentage of article citing R over time. The ecology journals shown in Figure \@ref(fig:ecology-citing-r) show strong upward trends of increasing proportions of articles citing R over time, but we do not see any unambiguous trends in the archaeology articles when considered together. Indeed, in several of the other archaeological journals in our sample, the first citations of R only occurred in the last two years. The sample sizes for the archaeology journals are too small to confidently infer any trend of over time, with the exception of the _Journal of Archaeological Science_ with `r how_many_articles_in_jas` articles. The inset plot in Figure \@ref(fig:archaeology-journals-with-subplot) shows a statistical test of change over time for articles citing R in the _Journal of Archaeological Science_. With a moderate r-squared value and low p-value for the linear model, we conclude there is some evidence for an increase in citations of R over time in this journal. This may show an increasing use of R among archaeologists, especially those working at the intersection of archaeology and the natural sciences. This may hint at the start of a trend like what we see in the ecology journals of a widespread adoption of R.

Following on from this observation about the increasing popularity of R in the _Journal of Archaeological Science_, the third detail we see in these results is the distinctive types of journals that have articles citing R. There is a focus on journals publishing scientific archaeology, especially those that focus on specialised empirical analysis. In addition to the general archaeology journals, we also see _Lithic Technology_, _Anthropozoologica_, and _International Journal of Osteology_ in the journal names, indicating that we find R used by specialists in stone artefacts and faunal remains. For more fine-grained insights into the topics that archaeologists are using R to study, we conducted a statistical analysis of the words in the titles of all the articles in our sample.

## What are R-using archaeologists writing about?

```{r text-mining-article-titles-archaeology}

# https://www.tidytextmining.com/twitter.html

# These are all archy articles
# wc_archaeology_2007_to_2017

# These are ones citing R
# cran_cites_in_archy_journals

# subtract ones citing R from ones that do not

wc_archaeology_2007_to_2017_no_R_cites <-
  archy_all_years %>%
  filter(TI %nin% archy_cran_all_years$TI)

# combine
archy_journal_articles <-
  bind_rows(wc_archaeology_2007_to_2017_no_R_cites %>%
            mutate(ID = "no_R_cites",
                   VL = as.character(VL)),
           archy_cran_all_years %>%
            mutate(ID = "has_R_cites"))


tidy_cites <-
archy_journal_articles %>%
  unnest_tokens(word, TI) %>%
  filter(!word %in% c(stop_words$word, "archaeology",
                      "archaeological",
                      "analysis", "study", "site", "period", "past", "patterns", "investigation", "analyses", "late", "region", "based", "central", "north", "south", "east", "west", "western", "eastern", "ad", "pre", "sites", "evidence", "prehistoric", "remains", "change", "de", "identification", "northern", "southern", "valley", "implications", "valley", "history", "historical", "modern", "context", "stable", "middle", "approach", "san", "artifacts", "palaeolithic"),
         str_detect(word, "[a-z]"))

frequency <-
  tidy_cites %>%
  group_by(ID) %>%
  count(word, sort = TRUE) %>%
  left_join(tidy_cites %>%
              group_by(ID) %>%
              summarise(total = n())) %>%
  mutate(freq = n/total)

frequency <-
  frequency %>%
  select(ID, word, freq) %>%
  spread(ID, freq) %>%
  arrange(no_R_cites, has_R_cites)

```

We computed a comparison of word frequencies in journal article titles in the Web of Science data to get a better understanding of what topics archaeologists are writing about when they cite R. First we separated the archaeology articles into two groups, those that cite R, and those that do not. Second, we filtered to keep only words that occur in titles in both groups, and removed very common and uninformative words (e.g. 'the', 'archaeological', 'study', etc.). This resulted in `r prettyNum(nrow(frequency), ',')` words in `r prettyNum(nrow(archy_journal_articles), ",")` articles. Third, for each word found in all the titles of the journal articles in each group, we computed its proportion of the total number of words in all the titles in each group. Figure \@ref(fig:text-mining-article-titles-archaeology-plot) shows the results of this analysis. Words near the red line are used with about equal frequencies by papers citing R and by papers not citing R. Words far away from the red line are used much more by one group of articles compared to the other.

```{r text-mining-article-titles-archaeology-plot, fig.cap=str_glue("Comparing the frequency of words used in titles of archaeology articles ({prettyNum(nrow(frequency), ",")} words in {prettyNum(nrow(archy_journal_articles), ",")} articles)")}

archaeology_articles_word_freqs <-
ggplot(frequency,
       aes(no_R_cites,
           has_R_cites)) +
    geom_abline(color = "red",
              size = 1) +
  geom_point(alpha = 0.1,
              size = 2.5,
              width = 0.25,
              height = 0.25) +
  geom_text_repel(aes(label = word),
            size = 3,
            segment.colour = "grey80") +
  scale_x_log10(labels = percent_format(),
                limits = c(0.00075, 0.015)) +
  scale_y_log10(labels = percent_format(),
                limits = c(0.00075, 0.015)) +
  theme_minimal(base_size = 16) +
  xlab("Articles that do not cite R") +
  ylab("Articles that cite R") +
  coord_equal()

ggsave(plot = archaeology_articles_word_freqs,
       filename = "archaeology_articles_word_freqs.png",
       path = str_glue('{here::here()}/analysis/figures'),
       height = 9,
       width = 9)

knitr::include_graphics(str_glue('{here::here()}/analysis/figures/archaeology_articles_word_freqs.png'))
```

Figure \@ref(fig:text-mining-article-titles-archaeology-plot) supports our observation that archaeologists using R tend to be doing archaeology that involves the natural and physical sciences. Articles that cite R more often have titles that include terms such as 'lithic', 'experimental', and 'isotope'. On the other hand, articles that do not cite R more often discuss the Roman and Bronze Age periods, and less often reflect a technical specialisation. If there is one that is characteristic of non-citing R articles, it seems to be in ceramics.  

## From using code in research to sharing code with publications

```{r archaeology-reproducible-articles}

archy_ctv_readme <- readLines(str_glue('{here::here()}/analysis/data/raw_data/ctv-archaeology-README.md'))

journals <- c("Journal of Archaeological Method and Theory|J Archaeol Sci|Journal of Anthropological Archaeology|Journal of Archaeological Science|PLOS|Journal of Human Evolution|Asian Perspectives|Scientific Reports|PLoS ONE|The Holocene|Archaeology in Oceania|Quaternary International|Internet Archaeology|Quaternary Science Reviews|Quaternary International|Journal of Archaeological Science: Reports|Open Quaternary|Evolution and Human Behavior|PaleoAnthropology")

top_archy_journals <-
 str_subset(archy_ctv_readme, journals)

top_archy_journal_names <-
  unlist(str_extract_all(archy_ctv_readme, journals))


top_archy_journal_names <- ifelse(top_archy_journal_names == "J Archaeol Sci",
                                  "Journal of Archaeological Science",
                                  ifelse(top_archy_journal_names == "PLOS",
                                  "PLoS ONE",
                                  top_archy_journal_names))

archy_ctv_readme <- top_archy_journals
archy_ctv_readme <- str_remove_all(archy_ctv_readme, "[[:punct:]]")
archy_ctv_readme_20XX <- str_extract(archy_ctv_readme, " 20[[:digit:]]{2} ")
archy_ctv_readme_20XX <- str_squish(unlist(archy_ctv_readme_20XX))
archy_ctv_readme_20XX <- as.numeric(archy_ctv_readme_20XX)
archy_ctv_readme_20XX <- archy_ctv_readme_20XX[archy_ctv_readme_20XX > 2010]

number_of_reproducible_articles <- length(archy_ctv_readme_20XX)

data_to_plot <- data_frame(year = archy_ctv_readme_20XX,
                  journal_name = top_archy_journal_names) %>%
  filter(!is.na(year),
         year <= 2017) %>%
  mutate(year = factor(year))
```

@Touchon_McCoy_2016 identified the use of scripting languages as being a factor for easily sharing methods and code, thereby increasing the rate of development of statistical methods. One notable practice we observed during our bibliometric analysis is that among authors of articles citing R, a subset of these authors make publicly available the code and data that they used to generate the results presented in their article. We identified `r number_of_reproducible_articles` articles that include R script and data files, either in the supplementary materials or in a trustworthy data repository such as Zenodo, Open Science Framework, Figshare, etc. Our continuously updated list of articles in this sample is available online here: https://github.com/benmarwick/ctv-archaeology. Figure \@ref(fig:archaeology-reproducible-articles-plot) shows that although this number is small, it is increasing, hinting at the emergence of a new approach to how archaeologists share their research. The author guidelines of this journal confirm this trend: "In the interests of open scholarship and the reproducibility of results, JCAA strongly encourages all authors to deposit material relating to their publication in a preservation repository" [@authorguidelines_JCAA].

These archaeology articles that include publicly available R code and data are part of a new approach to scientific communication that has also been observed in other fields. For example, the journal *Nature Neuroscience* requires authors 'to make the code that supports the generation of key figures in their manuscript available for review' [@Editors_2017]. Although we are not aware of attempts to quantify this change in the same way we have for archaeology, we have observed a number of recent publications that describe and recommend code sharing in statistics [@Baumer2014], genome biology [@markowetz2015five], computational biology [@Sandve2013], biostatistics [@Peng2009], computer science [@peng2011reproducible; @Mitchell2012], applied mathematics [@LeVeque2012], speech science [@Abari2012], political science [@king1995replication; @Dafoe2014], and the social sciences generally [@Miguel2014]. As part of this growing interest in using code for research we also see manifestos aimed at researchers doing any kind of quantitative work [@nosek2015promoting; @Ince2012; @Barnes2010] and articles recommending using R in undergraduate education [@Bray2014; @Eglen2009]. Much of this literature is concerned with identifying and solving problems of irreproducibility in research. These actions comes from a renewed interest in basic principles of the scientific method: that once-off results should not be trusted, instead they should be reproducible by other members of the research community [@Stark_2018]. Furthermore, that an article should sufficiently describe the presented research results such that a colleague can fully understand the results and how they were obtained. Many of these authors trace problems of irreproducibility to the increased complexity of computer-based analyses, combined with the limited space to describe them in a journal article, and mouse-driven computer programs where the researcher's analytical decisions are not recorded during the research process, and thus cannot be shared with other researchers.

In our view, merely using R (or similar open source programming languages) to conduct research would not constitute a tool-driven revolution by itself, but publicly sharing the code used for research, as a solution to problems of irreproducibility, is more likely to enable revolutionary change. Openly shared code speeds the widespread adoption of reproducibility as a core tenet of the scientific process, since it frees researchers from the black box that most mouse-driven computers are, and enables researchers to not only rerun the shared analysis, but to gain access to all parameter settings, empowering them to change these and so properly evaluate, extend and reuse the published results. As open source languages such as R (and Python) are free to use, and most trustworthy repositories are also free (such as Zenodo, Open Science Framework, Figshare, etc.), then even researchers with limited resources anywhere in the world can to contribute equally to the research community by using and sharing code. Using and sharing open source code is thus an important action for reducing inequality in the archaeological research community. This is because it enables participation by researchers who are unable to buy software licenses or access face-to-face training.

```{r archaeology-reproducible-articles-plot, fig.cap=str_glue('Articles in archaeology journals using R for reproducible research (n = {number_of_reproducible_articles})')}

archaeology_articles_r_reproducible <-
ggplot(data_to_plot,
       aes(year,
           fill = journal_name)) +
  geom_bar(position = "stack") +
  scale_y_continuous(breaks = 1:10) +
  scale_fill_discrete(name = "Journal")  +
  xlab("Year of publication") +
  ylab("Number of articles") +
  theme_minimal(base_size = 18) +
  theme(legend.text=element_text(size=16))

ggsave(plot = archaeology_articles_r_reproducible,
       filename = "archaeology_articles_r_reproducible.png",
       path = str_glue('{here::here()}/analysis/figures'),
       height = 9,
       width = 16)
knitr::include_graphics( str_glue('{here::here()}/analysis/figures/archaeology_articles_r_reproducible.png'))
```

## Citation effects of sharing code

A pragmatic issue relating to widespread changes in scientific practice is what the incentives are for members of the research community to change. This is a concern for researchers that might not be motivated by a desire to adhere to the abstract basic principles of what it means to practice science with integrity. If code sharing has concrete career advantages then we might expect it to be more likely to be part of a tool-driven revolution. @Vandewalle2012 analysed citation rates for 645 articles published in _IEEE Transactions on Image Processing_ during 2004–2006. He found statistically significant differences between the median number of citations for papers that have code available and papers that do not have code available. In considering causal relationships, Vandewalle raises the possibility of self-selection bias, where authors include code more often with their best papers. He also notes that for some papers, the code was made available by researchers other than the authors, after the publication has become popular.

In Figure \@ref(fig:citation-advantage) we conducted a similar analysis for archaeology articles using the 'TC' field in the data we obtained from the Web of Science service. TC stands for 'Web of Science Core Collection Times Cited Count'. This Times Cited count displays the total number of times a published paper was cited by other papers within the Web of Science Core Collection. Unlike Google Scholar, this does not include citations on blogs, pre-prints and other places outside of journal articles, so the citation counts from Web of Science are lower than those on Google Scholar. We see that archaeological articles that cite R are consistently more highly cited themselves than articles that do not cite R. The mechanisms underlying the citation effects of using R remain to be elucidated. The articles in our data are mostly not open access (only 20% are open access), so we cannot attribute the citation effect to open access effects, such as easier availability, and additional time in press of the articles [@Kurtz_Eichhorn_Accomazzi_Grant_Demleitner_Henneken_Murray_2005]. In our data all the article authors are also the code authors, so there is no popularity effect noted by Vandewalle. One possibilty is that authors preferentially tend to promote their articles containing code, beacause they want a greater return for the greater effort they have put into including the code with the article, this is equivalent to the self-selection bias postulated by Vandewalle. Another possiblity is that papers with code are perceived by readers to be more robust because of their transparency, and thus a more reliable item to cite in support of claims made by other authods. Another possible cause is that when a paper is accompanied by code (for example on a GitHub repository) it is more visible than a paper without code, and appears higher in search result rankings. All other factors equal, higher visibility leads to more citations because the reseracher will stop searching when theyve found the first paper that serves their purpose. Further work is necessary to understand the mechanisms of this citation effect, additional insights might come from comparisions of papers that use another open source language such as Python, and MATLAB, which is not.  

```{r citation-advantage}
# archy papers that use code are more often cited?
# is TC total citations?

archy_journal_articles_tally <-
archy_journal_articles %>%
  group_by(ID) %>%
  tally() %>%
  pull(n)

archy_journal_articles_citations <- 
archy_journal_articles %>%
  mutate(TC = as.numeric(TC),
         ID = ifelse(ID == "has_R_cites",
                     "Cites R", "Doesn't cite R")) %>%
  group_by(ID, PY) %>%
  summarise(median = median(TC)) %>%
  filter(PY >= 2010)

archy_journal_articles_n <- 
archy_journal_articles %>%
  mutate(TC = as.numeric(TC),
         ID = ifelse(ID == "has_R_cites",
                     "Cites R", "Doesn't cite R")) %>%
  filter(PY >= 2010) %>% 
  select(ID, PY, TC) 
  
# compute t-test
archy_journal_articles_citations_t_test <- 
  t.test(  archy_journal_articles_n$TC ~  factor(archy_journal_articles_n$ID))

tt <- t.test(archy_journal_articles_n$TC ~  factor(archy_journal_articles_n$ID))
tvalue <- tt$statistic %>% formatC(digits = 2, format = "f")
pvalue <- tt$p.value %>% formatC(digits = 5, format = "f")
df <- round(tt$parameter, 0)

dd <- archy_journal_articles_n %>% 
  group_by(ID) %>% 
  summarise(mean = mean(TC))
dd_cites_mean <- dd %>% filter(ID == "Cites R") %>%  pull(mean) %>% round(1)
dd_no_cites_mean <- dd %>% filter(ID == "Doesn't cite R") %>%  pull(mean) %>% round(1) 
test_explanation <- 
str_glue("On average, articles citing R \nhave significantly higher numbers\nof citations (m = {dd_cites_mean}) than articles\nthat do not (m =  {dd_no_cites_mean})\nt({df}) = {tvalue}, p =  {pvalue}")

archy_journal_articles_citations_plot <- 
  ggplot(archy_journal_articles_citations,
         aes(ID,
             median)) +
  geom_col() +
  facet_wrap( ~ PY) +
  theme_minimal(base_size = 16) +
  ylab("Median number of citations") +
  xlab("")
```

```{r results='hide'}
# add text to empty corner
png(here::here("analysis", "figures", "archy_journal_articles_citations_plot_cap.png"),
    width = 20, height = 15, units = "cm", res = 300)
print(archy_journal_articles_citations_plot)
library(grid)
grid.text(test_explanation, 
          x = 0.70, y = 0.25, 
          gp=gpar(fontsize=11),
          just = 'left')
invisible(dev.off())
```


```{r  fig.cap=str_glue('Median citation rates per year for archaeology articles 2010-2017 that cite R (n = {prettyNum(archy_journal_articles_tally[1], ",")}) and articles that do not cite R (n = {prettyNum(archy_journal_articles_tally[2], ",")})')}
knitr::include_graphics(here::here("analysis", "figures", "archy_journal_articles_citations_plot_cap.png"))
```

# Discussion 

Our hypothesis is that a tool-driven change is underway in the biological sciences, and is emerging in archaeology. The tool which drives this change is the use of scripting languages in computational work in these disciplines. We have shown that the use of R is on the rise among archaeologists using natural science methods, and has concrete advantages for authors that publish papers that cite R as they tend to be referenced more often, giving the authors more visibility and influence (see Huggett in this volume for critical discussion of open scholarship). 

The use of R or similar scripting languages enables a major shift in the technical and social dynamics of the research community, as it offers the possibility to communicate one's workflow in a highly detailed an efficient way, and easily share this worksflow with others. The sharing of code has been identified in other disciplines as an amplifier of change in methods [@Touchon_McCoy_2016]. It also enables researchers to not just reproduce the work of others, but to also evaluate them according to the scientific method. Thus, the sharing of code may be at the root of an upcoming tool-driven change for archaeology, consistent with the patterns described by @Galison_1997 [-@Galison_1997]. This change is transformational rather than revolutionary, enabling archaeologists to more faithfully adhere to a fundamental tenet of the scientific process which demands the reproducibility of results. We do not want to claim archaeologists did not want to produce reproducible research before the advance of scientific scripting languages. Indeed, there is a longstanding tradition in archaeology of publishing catalogues, lists and maps showing the data used for analyses. Empirical reproducibility has always been prominent in archaeological research as we can see from the value placed on re-examining museum collections, re-excavating old sites, and reusing previously published data [@Strupler_2017].

Nonetheless we feel that with the introduction of computers there has been a gradual and unintended drift away from reproducibility, and thus from scientific practice. In the digital age, many archaeological tasks have shifted from the descriptive and qualitative aspects to quantitative and computational analyses. This shift also mandates a change in documentation of analyses to enable other researchers to reproduce published results. Modern archaeology has often been lacking in this aspect, as the research has been undertaken using point-and-click software, which obscures and complicates the reproducibility of analyses. By using and sharing code we can undo this drift, and return to a robust scientific practice for archaeology. As we show, the advance of scripting languages takes place mostly in the part of archaeology that is in close contact with natural sciences. These sciences also show a trend of increased emphasis on reproducibility, with journals changing their data and code availability policies, requiring code and data to be published alongside articles [@Stodden_2013]. Also in archaeology, more and more funding agencies show interest in open science methods and transparency [@Strupler_2017].

As @Galison_1997 describes a shift in the practices of physicists, we believe so is archaeological practice changing in the digital age. @Huvila_2018 have explored the use of digital tools on archaeological practices to understand the boundaries of what counts as archaeological, what is merely related to archaeology and what should be excluded from archaeology. Reflecting on @Huvila_2018, our view is the use use of code is unquestionably archaeology, since it is just one of many tools that archaeologists are using for converting raw data into summaries, visualisations, and insights. These concerns about how digital tools affect what we consider is and is not archaeology intersect with the work of @gieryn1999cultural on boundary construction. In his cultural cartography of science, Gieryn examines boundaries between science generally and varieties of less authoritative non-science. He argues that the boundaries are drawn and redrawn contiuously in flexible, historically changing and sometimes ambiguous ways. Gieryn claims that the cultural authority of science flows from boundary work in professional and political settings where scientists construct a public image for science as a source of credible knowledge, validate their work, and marginalize claims by competitors. Boundary work involves attributions of select characteristics to science in order to distinguish it from non-scientific competitors. The increasing voluntary use and sharing of code by researchers, and demands for it by readers and peer reviewers is a form of active boundary work that is shifting the boundary between scientific and non- or less-scientific archaeology. We, as members of this group, argue that the use of code as a research tool, and the sharing of code as a public research product, are increasingly attributes that are being used to distinguish science from less scientific work. The reason for this is that using code, and making it available for others to inspect, enhances the credibility of knowledge claims and the visibility of those claims.

A related issue here is the _technicity_ of tools, in our case coding. We draw on @cassirer_form_1930 and @simondon_mode_1958 to define technicity as a term to describe the technology, i.e. tools and machines respectively, that interact with humans and with nature [@hoel_ontological_2013, 188]. Technology is said to own an instrumental kind of logos (Cassierer, see @hoel_ontological_2013, 194) and in analogy to language it exercises a certain measure of agency in mediating between humans, nature and technology. The emphasis here is on the function of technology, in the forces that it exercises, with a certain measure of autonomy, on other beings as well as in and through the new realities, it brings into being. The use of a scripting language might exemplify this, as it is not just a technological tool, but a proper "language" as well. Scripts of code are texts that translate data into visualisations and statements about the world, transversing and revitalizing conceptions of the relationship between people and nature, and between people as members of a research community.

The concept of technicity is relevant here because in contrast to the concept of technological determinism, which puts technology as a force against the human, van der Tuin and Hoel (as well as Cassirer and Simondon) enfold technology into 'the human' without letting it lose its 'foreignness' and further develop the notions of 'human' and 'nature' [@hoel_ontological_2013, 190]. Any change in tools therefore will influence how human researchers interact with their objects of interest and other people in their research community. For example, tools that make the research process more transparent and open should make the research community more open and inclusive to diverse participants and ideas. Using code to 'stand for' or represent the research process will increase our awareness of how archaeology itself 'stands for' the human experience in the past, and how it is a representation of the past [cf. @pearson1998beginning]. Similarly, the code has to be successfully executed to generate a useful result, just as claims about the past have to be successfully engaged with archaeological evidence to count as plausible.  Interestingly it is exactly at the point between continously evolving subjects and objects, where van der Tuin and Hoel place technology and the creation of knowledge [@hoel_ontological_2013, 199]. The "productive back-and-forth" between all parties may challenge established notions of culture, but also offers a concept of formation through differing, called "performative correspondence" [@hoel_ontological_2013, 201]. The potential of a certain technology cannot be known before its coming-into-being as it will reflect back on its creation ("concretization" in Simondon's terms) as well as interact with other technologies (developed or yet-to-be developed) [@hoel_ontological_2013, 194]. Observing how scientific scripting languages have become a concrete tool in ecology leads us to expect predict similar trends in archaeology.

We do not claim that a Kuhnian paradigm-change is happening in ecology or archaeology: Data- and method-sharing behaviours have been around in archaeology before now and do not present incommensurate ways of thinking about the subject in the way that a typical reading of Kuhn's paradigm change concept should. Indeed, social science disciplines such as archaeology may not even be easily susceptible to classical Kuhnian paradigm shifts. This is because high-power tests (i.e. statistical tests with high probabilities of rejecting false null hypotheses) capable of distinguishing between superior and inferior paradigms are rare in the social sciences, such as economics [@Ioannidis_Stanley_Doucouliagos_2017], compared to physical science. Modelling and case studies described by @Akerlof_Michaillat_2018 indicate that among discplines lacking evidence to routinely strongly discriminate between theories, the chances of getting trapped in an inferior paradigm are high. In this situation, true theories may not be adopted at all and the field is at risk of being captured by false paradigms. 

Although a discipline-wide paradigm shift might be off the table for archaeology, what we can see, though, is that there is a need for methods to share research in a way that is reproducible for others, and that archaeologists are looking for tools to make this possible. Using scripting languages and data repositories to share the scripts is a solution that enjoys increasing popularity in the archaeological research community. It has also expanded the 'trading zone' [@Galison_1997] where archaeologists collaborate with specialists in other fields to develop a shared language to get things done. In using scripting languages archaeologists are working at a trading zone with computer scientists and computational researchers in other fields to coordinate how tools from one domain can be useful in another. We can also see archaeologists in similar trading zones when using GIS, network methods, agent-based models, isotope analysis, remote sensing, and DNA analysis to answer archaeological questions. Archaeologists' embrace of, or turn towards, these methods may also be tool-driven revolutions. However, what makes the use of code unique as a tool-driven revolution is that coding is transcendental, it is an universal method with which we can do all, or which can be central to any, of those previously-mentioned approaches. That is why we believe archaeologists should pay attention to scripted workflows regardless of their usual toolkit and methodological interests.

## Making it easier

We acknowledge that learning to use code, if one has not recieved formal instruction, is not an easy task. As @Chrysanthi_2012 illustrate, it requires a certain familiarity with the computational tools to be able to use them not just on a technological basis, but creatively and in full knowledge of their restrictions and ambiguities. The awareness and the appropriate handling of shortcomings and contexts of the data used in an analysis is also a time- and thought-consuming effort. This efforts is required at the beginning of each archaeological research, and which may be exacerbated by using multiple data sets from varying sources [cf. @Hugget_2015]. 

As with data (see Fitzpatrick in this volume), sharing code in public takes a little time to ensure that it is fit for others to read. Our casual observations of the ways in which archaeologists are using and sharing code show a high degree of variability in code style and organisation, indicating that currently most archaeologists are independantly solving problems of how to write and share code through trial and error. This situation of guided variation (learning by trial and error) suggests that using code is not yet widespread enough among archaeologists to propagate due to frequency-dependant biases. It also suggests that the professional benefits (i.e. citation effects) are not yet widely known for code use behaviours to propagate due to content biases, and finally that there are not yet enough highly-visible prestigous researchers using code for this behaviour due to propagate due to model-based biases [@Rendell_et_al_2011; @boyd1988culture; @henrich2007dual]. This suggests to us that there is unrealised potential to improve the efficiency of using and code in archaeology by converging on some widely-agreed upon conventions that save time and investing effort in communicating the professional benefits of using code. 

Our contribution to improving the efficiency of using and sharing code is the R package rrtools ('reproducible research tools', https://github.com/benmarwick/rrtools). This package is the result of our analysis of existing practices among archaeologists and other researchers, and our study of best practices and current conventions in scientific computing, described in more detail in @marwick2018packaging. The goal of rrtools is to make it easier for archaeologists and other researchers to use R for research and publication. This package aims to simplify many of the steps needed to write reproducible research, and to guide users to best practices with minimal effort. The rrtools package contains functions that create a file structure according to fundamental principles of organising files for research. For example, we keep the data separate from the methods. This means keep the code in a separate directory to the data. We keep the raw data (i.e. field-collected and instrument output) seprate from data that is created or derived during the analysis. These two basic principles make it easy to stay organised during a complicated project, and make it easier for a reader to navigate their way through the compendium of files that are shared with the publication. At the heart of the project template provided by rrtools is an RMarkdown document that is where the report or journal manuscript is written. RMarkdown is a document format that allows the author to combine plain text, R code, and automation of all the usual details of scholarly writing such as citations, captions, and cross-references to tables and figures [@xie2018r]. The unique concept of RMarkdown is that the R code contained in the document will generate the statistical figures and tables when the document is executed (or rendered) into output such as PDF, MS Word or an HTML file. 

The rrtools package contains several functions for the R user to enable a researcher to quickly set up a compendium suitable for writing reproducible research in R. Each of these steps reflects a best practice that has been previously articulated in other fields [e.g. @Wilson_et_al_2017]. We will focus here on the first five, as these are most relevant to most researchers:

- **use_compendium:**  This function creates a new directory for the research project, and creates an R package within this directory. We use the R package structure as the standard for our directory because it is widely recognised by R users [@wickham2015r]. This means that people know where to look for code, where to look for data, and where to look for dependancies and other information.     
- **use_mit_license:** This function creates a copy of the MIT software license to the compendium. This is important for two reasons. First, because it tells the reader that the author is happy for their code to be reused by other people. And second, it tells the reader that the author does not take responsibility for any problems that the reader might have when they use the code. This is important for setting the expectations about the relationship between the author and the reader, regarding the use of code.    
- **use_github:**  This will initiate the use of the Git version control system. This is the current state-of-the-art for version control of any kind of plain text file, including text, code, data, and images [@jones2013git]. This will also create a repository on the GitHub website. Using version control is important because it allows the author to time-travel back to earlier states of their analysis, if they take a dead-end path. It is also important for making collaboration smooth because many people can work on one set of files without losing track of what the most recent version is. Plus it is nice to have a remote back-up of our work in case of an emergency. The GitHub repository can be kept private if desired, until the work is published.     
- **use_readme_rmd:**  This will create a simple document that is usually the first thing a reader sees when they browse the code files. This document is important because it helps to describe to the reader what to expect in the compendium, and it gives details of how to cite the compendium and engage with it if they want to make changes (e.g. if a reader finds a mistake that needs to be fixed).
- **use_analysis:**  This function creates a set of folders according to the best practices for organising a typical research project [@Wilson_et_al_2017; @noble2009quick]. We recognise that this file structure wont be perfect for every project. But our observations show that it is in wide use, and will suit many projects quite well. It will at least make the user think about how to organise their project logically, and to make it easier for others to navigate.

# Conclusion

Starting with the discussion of Kuhn's influential work on paradigm shifts in science [@Kuhn_1962], we take inspiration from @Galison_1997 to propose a another explanation of how changes occurs in research communities, emphasising the transformative role of tools. The change we focus on is the use of scripts to document and communicate data analysis. This change will increase the computational reproducibility of archaeology, helping the discipline adhere more closely to the core values of science. The tool with the highest potential to achieve this currently is the R programming language. However, we realise that this will change in time, and in the future newer technologies will replace R. The key point here is that this transformative tool is any open source scripting language. 

We have presented a bibliometric analysis that reveals substantial change in the use of the R programming languages in ecology. Citations patterns show that ecological and evolutionary sciences have strongly embraced R in their publications. Archaeologists have more recently taken up R, but to a much lesser degree, so far, than what we see in the other fields, and most commonly in more scientific aspects of archaeology. We identifed an advantage of citing R for researchers as it leads to being referenced more often. We also identified a small, but increasing, set of archaeology papers that use R to make their work fully reproducible. In reflecting on these results, we have noted the technicity of coding in how it mediates between humans, nature and technology. We've proposed that the increasing adoption of coding among archaeologists is a form of active boundary work, shifting the boundary between scientific and unscientific archaeology, and is developing a trading zone between archaeologists and programming specialists such as computer scientists and software engineers as they search for useful tools. Many useful tools have already emerged from this trading zone, including our R package, rrtools, designed to make it easy for researchers to make their research reproducible. We hope this will help to realise some of the potential to make archaeological research more open and reproducible, both within the research community and to the public, as well as speeding the transfer of new results and methods throughout the research community without barriers due to access to resources, and also in this way supporting the practice of archaeology that is more faithful to the core values of science.  

We have outlined a positive future for archaeology where research publications are accompanied by code and data, enabling a 'critical self-consciousness' at a community-wide scale, similar to that imagined by @clarke1973archaeology as part of the discipline's 'loss of innocence'. A charactertic of this stage of disciplinary maturity is 'a closer understanding of its internal structure' [@clarke1973archaeology, p. 7], and we can think of no more efficient and intelligible way to communicate the internals of archaeological analyses to other members of the discipline than by encoding the assumptions, logic, and calculations in scripts of an open source programming language. If we accept that that is necessary for the future of the discipline, we must confront two implications. First is that there is currently a shortage of incentives to motivate use and sharing of code. Our observation is that many researchers will not change unless required to by gate-keepers at prestigious journals and funding sources. In other research communities we see people in these gate-keeping roles (e.g. in over 5,000 journals and professional organizations) effecting change by adopting the Transparency and Openness Promotion Guidelines that establish community standards of code and data availability that help to align scientific ideals with practices and disciplinary norms [@Nosek_et_al_2015]. Simple forms of signalling, such as badges on papers to indicate that the authors have made code and data available, may also help to shift norms and raise awareness of these desirable behaviours [@Kidwell_et_al_2016]. 

However, cultural change on an community-wide scale, such as a shift to the wide-spread use of code among archaeologists, is most likely to happen via the slow enculturation of people as they internalize norms during their formative years, and not via contemporaneous exposure to external cultural influences [@Vaisey_Lizardo_2016]. This means it is unlikely that a professional archaeologist reading this paper, or ones like it, will be motivated to use code if they were not trained to work with code at the start of their career. The implication here is that the most effective way to stimulate this change is during the formative years of professional training. This means updating our professional training curricula by shifting from a model of creating T-shaped researchers (where the vertical bar on the T represents the depth of specialist skills and expertise in archaeology, whereas the horizontal bar is the bredth of skills and knowledge of related and intersecting fields) to gamma-shaped researchers [@Fiore_Gartland_2017]. A gamma-shaped researcher has expert-level depth in archaeology, and is versed and proficient in other domains the provide skills such as analysing data with a programming language. A gamma-shaped researcher with their MA or PhD in archaeology may also be conversant in the language and culture of computer science enough to have conversations and collaborate in the trading zone, but does not need to be an expert in computer science to advance that discipline. 

## Acknowledgements

Our project comes from the group who took part in the 2017 Summer School on Reproducible Research in Landscape Archaeology at the Freie Universität Berlin (17-21 July), funded and jointly organized by Excellence Cluster 264 Topoi, the Collaborative Research Center 1266, and ISAAKiel.

<!-- The following line inserts a page break when the output is MS Word. For page breaks in PDF, use \newpage on its own line.  -->
##### pagebreak

# References
<!-- The following line ensures the references appear here for the MS Word or HTML output files, rather than right at the end of the document (this will not work for PDF files):  -->
<div id="refs"></div>

##### pagebreak

### Colophon

This report was generated on `r Sys.time()` using the following computational environment and dependencies:

```{r colophon, cache = FALSE}
# which R packages and versions?
devtools::session_info()
```

The current Git commit details are:

```{r}
# what commit is this file at? You may need to change the path value
# if your Rmd is not in analysis/paper/
git2r::repository(here::here())
```
